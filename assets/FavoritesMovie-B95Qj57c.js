import{r,j as t,d as g,B as h,L as _}from"./index-BKNVy4Qs.js";import{d as x}from"./delayFn-Cv9sn8sE.js";const j="_container_g9zug_1",F="_cardWrapper_g9zug_17",L="_cardList_g9zug_31",N="_title_g9zug_47",y="_removeBtn_g9zug_55",s={container:j,cardWrapper:F,cardList:L,title:N,removeBtn:y},B=()=>{const[o,i]=r.useState([]),[n,c]=r.useState(!1),[l,d]=r.useState(!1);r.useEffect(()=>{(async()=>{try{d(!0),await x(1e3);const a=JSON.parse(localStorage.getItem("favorites")||"[]");i(a),c(!1)}catch(a){console.error("Failed to fetch favorites:",a),c(!0)}finally{d(!1)}})()},[]);const f=r.useCallback(e=>{i(a=>{const v=a.filter(m=>m.id!==e);return localStorage.setItem("favorites",JSON.stringify(v)),v})},[]),u=r.useCallback(e=>t.jsxs("div",{className:s.cardWrapper,children:[t.jsx(g,{id:e.id,title:e.title||e.original_title,poster:e.poster_path}),t.jsx(h,{className:s.removeBtn,onClick:()=>f(e.id),children:"Delete"})]},e.id),[f]),p=r.useMemo(()=>l?t.jsx(_,{}):n?t.jsx("p",{children:"Failed to load favorites."}):o.length===0?t.jsx("p",{className:s.empty,children:"Don't have any favorite movies"}):t.jsx("div",{className:s.cardList,children:o.map(u)}),[l,n,o,u]);return t.jsxs("div",{className:s.container,children:[t.jsx("h2",{className:s.title,children:"Favorites movie"}),p]})};export{B as default};
