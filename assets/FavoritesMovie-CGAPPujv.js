import{r as s,y as o,j as t,d as x,B as j,L as y}from"./index-CUOtPIL2.js";import{u as g,d as F}from"./useFetch-BXXdbUT3.js";const N="_container_15vnb_1",b="_cardWrapper_15vnb_17",L="_cardList_15vnb_37",S="_title_15vnb_53",B="_removeBtn_15vnb_61",r={container:N,cardWrapper:b,cardList:L,title:S,removeBtn:B},f="you-don`t-have-any-favorites-movie",p="failed-to-load-favorites",C=()=>{const[a,n]=s.useState([]),[m,c,i]=g(async()=>(await F(1e3),JSON.parse(localStorage.getItem("favorites")||"[]")));s.useEffect(()=>{m(null).then(e=>{e&&n(e),!(e!=null&&e.length)&&!o.isActive(f)&&o.info("You don't have any favorite movies",{toastId:f})})},[]);const l=s.useCallback(e=>{n(_=>{const v=_.filter(h=>h.id!==e);return localStorage.setItem("favorites",JSON.stringify(v)),v})},[]),d=s.useCallback(e=>t.jsxs("div",{className:r.cardWrapper,children:[t.jsx(x,{id:e.id,title:e.title||e.original_title||"",poster:e.poster_path}),t.jsx(j,{className:r.removeBtn,onClick:()=>l(e.id),children:"Delete"})]},e.id),[l]),u=s.useMemo(()=>c?t.jsx(y,{}):i?t.jsx("p",{children:"Failed to load favorites."}):(i&&o.isActive(p)&&o.error("Failed to load favorites",{toastId:p}),a.length===0?t.jsx("p",{className:r.empty,children:"Don't have any favorite movies"}):t.jsx("div",{className:r.cardList,children:a.map(d)})),[c,i,a,d]);return t.jsxs("div",{className:r.container,children:[t.jsx("h2",{className:r.title,children:"Favorites movie"}),u]})};export{C as default};
