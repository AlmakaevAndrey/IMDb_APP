import{u as C,r,y as h,j as s,S as P,F,L as W,M as N,P as T}from"./index-CUOtPIL2.js";import{M as E}from"./MovieService-DFnUauZq.js";import{u as L}from"./useFetch-BXXdbUT3.js";const b="_homeWrapper_11pmt_1",y="_searchMovieWrapper_11pmt_27",I="_controlsContainer_11pmt_47",R="_MovieFilters_11pmt_71",o={homeWrapper:b,searchMovieWrapper:y,controlsContainer:I,MovieFilters:R},p="no-movies-toast",k=()=>{const[m,c]=C(),i=Number(m.get("page"))||1,[l,v]=r.useState({}),[a,g]=r.useState(""),[e,M]=r.useState(null),[f,d,u]=L(async({query:t,filters:n,page:S})=>await E.getSearchMovie(t,n,S)),x=r.useRef(null);r.useEffect(()=>{const t=setTimeout(()=>{f({query:a,filters:l,page:i}).then(n=>{n&&M(n)})},400);return()=>clearTimeout(t)},[a,l,i]),r.useEffect(()=>{e&&a.trim()!==""&&e.results.length===0&&!h.isActive(p)&&h.info("No movies found",{toastId:p})},[e,a]);const _=r.useCallback(t=>{c({page:t.toString()})},[c]),j=r.useMemo(()=>Math.min((e==null?void 0:e.total_pages)||1,10),[e]);return s.jsxs("div",{className:o.homeWrapper,children:[s.jsx("h1",{children:"Movies on TMDB"}),s.jsx("div",{className:o.controlsContainer,ref:x,children:s.jsxs("div",{className:o.searchMovieWrapper,children:[s.jsx(P,{value:a,onChange:t=>g(t.target.value)}),s.jsx(F,{onFilterChange:v,className:o.MovieFilters})]})}),d&&s.jsx(W,{}),u&&s.jsx("div",{className:o.error,children:u}),s.jsx(N,{movies:(e==null?void 0:e.results)||[]}),s.jsx(T,{totalPages:j,currentPage:i,onPageHandlerChange:_})]})};export{k as default};
